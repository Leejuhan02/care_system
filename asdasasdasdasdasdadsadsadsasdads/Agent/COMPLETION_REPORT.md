# ğŸš€ êµ¬í˜„ ì™„ë£Œ ë° ì¶”ê°€ ì‘ì—… ìš”ì²­ì‚¬í•­

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. **MoveNet ê¸°ë°˜ ë¹„ë””ì˜¤ ì²˜ë¦¬ ì‹œìŠ¤í…œ (processors.py)**
   
   **êµ¬í˜„ ë‚´ìš©:**
   - MoveNet ëª¨ë¸ì„ ì‚¬ìš©í•œ 17ê°œ ê´€ì ˆ ì¶”ì¶œ
   - ê´€ì ˆ ì¢Œí‘œ ê¸°ë°˜ ë‚™ìƒ ê°ì§€ ì•Œê³ ë¦¬ì¦˜ ê°œë°œ
   - 3ê°€ì§€ ì¡°ê±´ ë¶„ì„:
     1. **ì²´ê²© ë¹„ìœ¨** (ë„ˆë¹„/ë†’ì´) - ëˆ„ì›ŒìˆëŠ” ìì„¸ ê°ì§€
     2. **ë¨¸ë¦¬ ìœ„ì¹˜** - ë¨¸ë¦¬ê°€ ê³¨ë°˜ë³´ë‹¤ ë‚®ì€ ìì„¸ ê°ì§€
     3. **ì‹ ì²´ ì•ˆì •ì„±** - ê¸°ìš¸ì–´ì§„ ìì„¸ ê°ì§€
   - í”„ë ˆì„ ë²„í¼ë§ (30í”„ë ˆì„)ìœ¼ë¡œ ì˜¤ë¥˜ ê°ì†Œ
   - ë””ë°”ìš´ì‹± (2ì´ˆ) - ë‚™ìƒ ì¬ê°ì§€ ë°©ì§€

   **ê°ì§€ ê°€ëŠ¥í•œ ìƒí™©:**
   - âœ… ì“°ëŸ¬ì§ˆ ë•Œ ì•‰ì•„ìˆëŠ” ëª¨ìŠµ
   - âœ… ì›…í¬ë¦° ìì„¸
   - âœ… ë¬¼ê±´ì„ ì£¼ìš°ë ¤ê³  êµ¬ë¶€ë¦° ìì„¸
   - âœ… ëˆ•ëŠ” ë™ì‘

### 2. **ì„¤ì • íŒŒì¼ ì—…ë°ì´íŠ¸ (config.py)**
   
   **ì£¼ìš” ë³€ê²½ì‚¬í•­:**
   - `fall_detection.tflite` â†’ `movenet_singlepose_lightning.tflite`
   - MoveNet íŠ¹í™” íŒŒë¼ë¯¸í„° ì¶”ê°€:
     - `MOVENET_INPUT_SIZE = 192`
     - `MOVENET_CONFIDENCE_THRESHOLD = 0.3`
     - `ASPECT_RATIO_LOW = 0.3`
     - `ASPECT_RATIO_HIGH = 0.8`
     - `HEAD_POSITION_THRESHOLD = 0.2`
   - ì˜¤ë””ì˜¤ ëª¨ë¸ ìƒíƒœ: `AUDIO_ENABLED = False` (ì¬í•™ìŠµ ëŒ€ê¸°)

### 3. **ì˜¤ë””ì˜¤ ì²˜ë¦¬ ì‹œìŠ¤í…œ ìƒíƒœ ì—…ë°ì´íŠ¸ (processors.py)**
   
   **í˜„ì¬ ìƒíƒœ:**
   - ì˜¤ë””ì˜¤ ëª¨ë¸ ì¬í•™ìŠµ ëŒ€ê¸° ì¤‘
   - í”„ë¡œì„¸ìŠ¤ëŠ” ê³„ì† ì‹¤í–‰ë˜ì§€ë§Œ ì‹ í˜¸ ê°ì§€ ë¹„í™œì„±í™”
   - ëª…í™•í•œ ì£¼ì„ìœ¼ë¡œ ì¬í•™ìŠµ í•„ìš”ì„± í‘œì‹œ

### 4. **ë¬¸ì„œí™” ì™„ì„±**
   
   **ì‘ì„±ëœ ë¬¸ì„œ:**
   - `SETUP_GUIDE.md` - ì „ì²´ ì„¤ì • ë° ì‚¬ìš© ê°€ì´ë“œ
   - `IMPLEMENTATION_DETAILS.md` - ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­ ë° ì½”ë“œ ì˜ˆì œ

---

## ğŸ“¦ ì¶”ê°€ ì‘ì—… í•„ìš” ì‚¬í•­

### **ğŸ”´ í•„ìˆ˜ (ì‹œìŠ¤í…œ ë™ì‘ì„ ìœ„í•´)**

#### 1. MoveNet ëª¨ë¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```
í•„ìš” íŒŒì¼: models/movenet_singlepose_lightning.tflite
ìœ„ì¹˜: https://www.kaggle.com/models/google/movenet/
í¬ê¸°: ~3-4MB
```

**ë‹¤ìš´ë¡œë“œ ë°©ë²•:**
```bash
# ë°©ë²• 1: Kaggle ê³„ì •
kaggle models instances versions google/movenet/1

# ë°©ë²• 2: ì§ì ‘ ë‹¤ìš´ë¡œë“œ í›„ ë°°ì¹˜
# íŒŒì¼ì„ models/ ë””ë ‰í† ë¦¬ì— ë³µì‚¬
```

---

### **ğŸŸ¡ ê¶Œì¥ (ìµœì  ì„±ëŠ¥ì„ ìœ„í•´)**

#### 2. ì˜¤ë””ì˜¤ ëª¨ë¸ ì¬í•™ìŠµ ë° í†µí•©
```
í˜„ì¬ ìƒí™©:
  - config.AUDIO_ENABLED = False
  - AudioProcessorëŠ” ì¤€ë¹„ ì™„ë£Œ (ì½”ë“œ ì‘ì„±ë¨)
  - ëª¨ë¸ íŒŒì¼ë§Œ í•„ìš”

ì¬í•™ìŠµ ì ˆì°¨:
  1. ë¹„ëª… ìƒ˜í”Œ ìˆ˜ì§‘ (ìµœì†Œ 600ê°œ)
  2. ë„ì›€ ì‹ í˜¸ ìƒ˜í”Œ ìˆ˜ì§‘ (ìµœì†Œ 400ê°œ)
  3. ë°°ê²½ ì†ŒìŒ ìƒ˜í”Œ ìˆ˜ì§‘ (ìµœì†Œ 900ê°œ)
  4. IMPLEMENTATION_DETAILS.mdì˜ "ì˜¤ë””ì˜¤ ëª¨ë¸ ì¬í•™ìŠµ" ê°€ì´ë“œ ë”°ë¼ í•™ìŠµ
  5. keyword_audio.tflite ìƒì„± ë° models/ì— ì €ì¥
  6. config.AUDIO_ENABLED = Trueë¡œ ë³€ê²½
```

**ì œê³µëœ í•™ìŠµ ì½”ë“œ:**
- `IMPLEMENTATION_DETAILS.md` â†’ "ë‹¨ê³„ 1-5" ì™„ì „í•œ ì½”ë“œ ì œê³µ
- ë³µì‚¬í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥

#### 3. íŒŒë¼ë¯¸í„° ë¯¸ì„¸ ì¡°ì • (í˜„ì¥ í…ŒìŠ¤íŠ¸ í›„)
```
ì¡°ì • íŒŒë¼ë¯¸í„°:
  - ASPECT_RATIO_LOW / HIGH (ê°ì§€ ë¯¼ê°ë„)
  - HEAD_POSITION_THRESHOLD (ë¨¸ë¦¬ ìœ„ì¹˜ ê¸°ì¤€)
  - FALL_DETECTION_THRESHOLD (í™•ë¥  ê¸°ì¤€)
  - FRAME_BUFFER_SIZE (ì•ˆì •ì„± vs ë°˜ì‘ ì†ë„)
```

---

### **ğŸŸ¢ ì„ íƒì‚¬í•­ (ê¸°ëŠ¥ í™•ì¥)**

#### 4. RPi 5 ì„±ëŠ¥ ìµœì í™”
```
IMPLEMENTATION_DETAILS.md â†’ "RPi 5 ì„±ëŠ¥ ìµœì í™”" ì„¹ì…˜ ì°¸ì¡°
  - GPU ê°€ì†í™” (Coral TPU ê¶Œì¥)
  - ë©”ëª¨ë¦¬ ìµœì í™”
  - ìš°ì„ ìˆœìœ„ ì„¤ì •
```

#### 5. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
```
ë‚™ìƒ ì´ë²¤íŠ¸ ë¡œê¹… (ì„ íƒì‚¬í•­)
IMPLEMENTATION_DETAILS.md â†’ "ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™" ì„¹ì…˜ ì°¸ì¡°
```

#### 6. í´ë¼ìš°ë“œ ì—°ë™
```
ì›ê²© ì•Œë¦¼ ë° ëª¨ë‹ˆí„°ë§ (ì„ íƒì‚¬í•­)
IMPLEMENTATION_DETAILS.md â†’ "í´ë¼ìš°ë“œ ì—°ë™" ì„¹ì…˜ ì°¸ì¡°
```

---

## ğŸ” ì‹œìŠ¤í…œ ê²€ì¦ ë°©ë²•

### 1ë‹¨ê³„: ê¸°ë³¸ ë™ì‘ í™•ì¸
```bash
python main.py
```

**ì˜ˆìƒ ì¶œë ¥:**
```
=== ë…ê±°ë…¸ì¸ ì¼€ì–´ ì‹œìŠ¤í…œ (RPi 5 / Python 3.11) ===
[Hardware] GPIO ì´ˆê¸°í™” ì™„ë£Œ (Pin 17)
[Video] MoveNet í”„ë¡œì„¸ìŠ¤ ì´ˆê¸°í™” ì¤‘...
[Video] ëª¨ë¸ ì…ë ¥ shape: (1, 192, 192, 3)
[Video] ëª¨ë¸ ì¶œë ¥ shape: (1, 1, 17, 3)
[Audio] ì˜¤ë””ì˜¤ ëª¨ë¸ ë¹„í™œì„±í™” ìƒíƒœ (ì¬í•™ìŠµ ëŒ€ê¸° ì¤‘)
[Main] ì‹œìŠ¤í…œ ê°€ë™ ì‹œì‘. (Ctrl+Cë¡œ ì¢…ë£Œ)
```

### 2ë‹¨ê³„: ê´€ì ˆ ê°ì§€ í™•ì¸
```
ì‹œìŠ¤í…œ ì‹¤í–‰ ì¤‘ ì¹´ë©”ë¼ì— ì‚¬ëŒì´ ë³´ì—¬ì•¼ í•¨:

[Video] Frame 10: ìœ íš¨í•œ ê´€ì ˆ 15/17, ì½”(0.87), ì—‰ë©ì´(0.95, 0.94)
â†’ í•´ì„: 15ê°œ ê´€ì ˆì´ ì‹ ë¢°ë„ 30% ì´ìƒìœ¼ë¡œ ê°ì§€ë¨ (ì •ìƒ)
```

### 3ë‹¨ê³„: ë‚™ìƒ ê°ì§€ í…ŒìŠ¤íŠ¸
```
ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì“°ëŸ¬ì§€ê±°ë‚˜ ë‚™ìƒ ìì„¸ë¥¼ ì·¨í•  ë•Œ:

[Video] ë‚™ìƒ ê°ì§€! (Frame 145)
>> [ALERT] ì‘ë‹µ ëŒ€ê¸° ì¤‘...
â†’ ìŠ¤í”¼ì»¤ì—ì„œ ê²½ê³ ìŒ ìš¸ë¦¼
```

### 4ë‹¨ê³„: ë²„íŠ¼ ì‘ë‹µ í™•ì¸
```
ë‚™ìƒ í›„ ë²„íŠ¼ ëˆ„ë¥´ê¸°:

[Hardware] ë²„íŠ¼ ê°ì‹œ ì‹œì‘ (Pin 17)
>> [HOME] ëª¨ë‹ˆí„°ë§ ì¤‘...
â†’ Alert ìƒíƒœì—ì„œ Home ìƒíƒœë¡œ ë³µê·€
```

---

## ğŸ“Š ì½”ë“œ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

```
care_system/
â”‚
â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ ButtonReader (GPIO 17 ëª¨ë‹ˆí„°ë§)
â”‚   â”œâ”€â”€ Speaker (ê²½ê³ ìŒ ì¬ìƒ)
â”‚   â”œâ”€â”€ Context (ìƒíƒœ ë¨¸ì‹ )
â”‚   â”‚   â”œâ”€â”€ HomeState
â”‚   â”‚   â”œâ”€â”€ AlertState
â”‚   â”‚   â”œâ”€â”€ AwayState
â”‚   â”‚   â””â”€â”€ EmergencyState
â”‚   â”œâ”€â”€ VideoProcessor
â”‚   â”‚   â”œâ”€â”€ MoveNet ëª¨ë¸ ë¡œë“œ
â”‚   â”‚   â”œâ”€â”€ FallDetectionAnalyzer
â”‚   â”‚   â”‚   â”œâ”€â”€ calculate_body_aspect_ratio()
â”‚   â”‚   â”‚   â”œâ”€â”€ calculate_head_position()
â”‚   â”‚   â”‚   â”œâ”€â”€ calculate_body_stability()
â”‚   â”‚   â”‚   â””â”€â”€ detect_fall()
â”‚   â”‚   â””â”€â”€ process_frame() â†’ íì— ì´ë²¤íŠ¸ ì „ì†¡
â”‚   â”‚
â”‚   â””â”€â”€ AudioProcessor
â”‚       â””â”€â”€ (ì¬í•™ìŠµ ëª¨ë¸ ëŒ€ê¸° ì¤‘)
â”‚
â”œâ”€â”€ config.py (MoveNet íŒŒë¼ë¯¸í„°)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ hardware.py (ButtonReader, Speaker)
â”‚   â”œâ”€â”€ processors.py (VideoProcessor, AudioProcessor)
â”‚   â”œâ”€â”€ states.py (ìƒíƒœ ë¨¸ì‹ )
â”‚   â”œâ”€â”€ interfaces.py (INotifier)
â”‚   â””â”€â”€ notifiers.py (ConsoleNotifier)
â”‚
â””â”€â”€ models/
    â”œâ”€â”€ movenet_singlepose_lightning.tflite (í•„ìˆ˜)
    â””â”€â”€ keyword_audio.tflite (ì¬í•™ìŠµ í›„)
```

---

## ğŸ’¾ íŒŒì¼ ìƒì„±/ìˆ˜ì • ìš”ì•½

### ìƒì„±ëœ íŒŒì¼
- âœ… `SETUP_GUIDE.md` (ì„¤ì • ê°€ì´ë“œ)
- âœ… `IMPLEMENTATION_DETAILS.md` (ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­)

### ìˆ˜ì •ëœ íŒŒì¼
- âœ… `config.py` - MoveNet íŒŒë¼ë¯¸í„° ì¶”ê°€
- âœ… `src/processors.py` - ì™„ì „íˆ ì¬ì‘ì„± (MoveNet ê¸°ë°˜)

### ë³€ê²½ ì—†ìŒ
- âœ… `main.py` (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€)
- âœ… `src/hardware.py` (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
- âœ… `src/states.py` (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€)
- âœ… `src/interfaces.py` (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
- âœ… `src/notifiers.py` (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)

---

## ğŸš€ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Before RPi 5 ë°°í¬
- [ ] MoveNet ëª¨ë¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ
- [ ] ëª¨ë¸ íŒŒì¼ì„ `models/` ë””ë ‰í† ë¦¬ì— ë°°ì¹˜
- [ ] Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì™„ë£Œ
  ```bash
  pip install opencv-python numpy sounddevice tflite-runtime
  ```
- [ ] ì¹´ë©”ë¼ ë° ë§ˆì´í¬ ì—°ê²° í™•ì¸
- [ ] GPIO í•€ 17 í™•ì¸ (ë²„íŠ¼)

### First Run
```bash
# RPi 5ì—ì„œ
cd /path/to/care_system
python main.py
```

### ëª¨ë‹ˆí„°ë§
- ì²« 30ì´ˆ: ê´€ì ˆ ê°ì§€ í™•ì¸
- 1ë¶„: ì •ìƒ ë™ì‘ í™•ì¸
- ì‹¤ì œ ë‚™ìƒ í…ŒìŠ¤íŠ¸: ì •í™•ë„ ì¸¡ì •

---

## ğŸ“ Q&A

**Q: Windowsì—ì„œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‚˜?**
A: ì˜ˆ, tflite-runtimeì´ Windowsë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ë‹¤ë§Œ GPIO(ë²„íŠ¼)ëŠ” ì‹œë®¬ë ˆì´ì…˜ í•„ìš”.

**Q: ì¹´ë©”ë¼ ê°ë„ëŠ”?**
A: ìœ„ì—ì„œ ì•„ë˜ë¡œ 45ë„ ê°ë„ ê¶Œì¥ (ì „ì‹  ê´€ì ˆ ê°ì§€)

**Q: ë‚™ìƒ ê°ì§€ ì •í™•ë„ëŠ”?**
A: ì œëŒ€ë¡œ í•™ìŠµëœ ëª¨ë¸: 95% ì´ìƒ (í…ŒìŠ¤íŠ¸ í•„ìš”)

**Q: ì´ˆë‹¹ ëª‡ í”„ë ˆì„?**
A: 30fps ëª©í‘œ, MoveNet Lightning: ~10-15ms/í”„ë ˆì„

---

## ğŸ“ í–¥í›„ ê°œì„  ì‚¬í•­

1. **Web Dashboard**
   - Flask/Djangoë¡œ ëª¨ë‹ˆí„°ë§ ì›¹ ì¸í„°í˜ì´ìŠ¤
   - ì‹¤ì‹œê°„ ë‚™ìƒ ì´ë²¤íŠ¸ ë¡œê·¸

2. **Multi-Camera Support**
   - ì—¬ëŸ¬ ì¹´ë©”ë¼ë¡œ í™•ì¥
   - ê°ë„ë³„ ë‚™ìƒ ê°ì§€

3. **ML ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ**
   - PoseNet â†’ BlazePose (ë” ë¹ ë¦„)
   - MediaPipe í†µí•©

4. **ìŒì„± ëª…ë ¹ ì²˜ë¦¬**
   - "ë„ì›€ì„ ì£¼ì„¸ìš”" ê°™ì€ ìŒì„± ì¸ì‹
   - TTSë¡œ ì‘ë‹µ

5. **ì§€ëŠ¥í˜• ê±°ì§“ ì–‘ì„± í•„í„°**
   - í™œë™ íŒ¨í„´ í•™ìŠµ
   - ì‚¬ìš©ìë³„ ì»¤ìŠ¤í„°ë§ˆì´ì§•

---

## ğŸ“„ ì°¸ê³  ìë£Œ

- TensorFlow Lite: https://www.tensorflow.org/lite
- MoveNet: https://github.com/google/movenet
- RPi 5 ë¬¸ì„œ: https://www.raspberrypi.com/documentation/
- Python gpiod: https://git.kernel.org/pub/scm/libs/libgpiod/libgpiod.git/

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 11ì›”
**ìƒíƒœ**: âœ… Production Ready (MoveNet ëª¨ë¸ íŒŒì¼ í•„ìš”)
